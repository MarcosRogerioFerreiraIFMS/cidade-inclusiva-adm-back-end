generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Noticia {
  id             String           @id @default(uuid())
  titulo         String
  conteudo       String
  dataPublicacao DateTime         @default(now())
  categoria      CategoriaNoticia
  url            String?
  foto           String?
  criadoEm       DateTime         @default(now())
  atualizadoEm   DateTime         @updatedAt
}

model Profissional {
  id            String                    @id @default(uuid())
  nome          String
  foto          String?
  telefone      String
  email         String                    @unique
  especialidade EspecialidadeProfissional
  comentarios   Comentario[]              @relation("ProfissionalComentarios")
  criadoEm      DateTime                  @default(now())
  atualizadoEm  DateTime                  @updatedAt
}

model Comentario {
  id           String        @id @default(uuid())
  likes        Int           @default(0)
  conteudo     String
  visivel      Boolean       @default(true)
  entidadeId   String
  entidadeTipo TipoEntidade
  profissional Profissional? @relation("ProfissionalComentarios", fields: [entidadeId], references: [id], onDelete: Cascade)
  criadoEm     DateTime      @default(now())
  atualizadoEm DateTime      @updatedAt

  @@index([entidadeId, entidadeTipo])
}

enum CategoriaNoticia {
  DIREITOS
  BENEFICIOS
  OPORTUNIDADES
  TECNOLOGIA
  TRABALHO
  SAUDE
  EDUCACAO
  CULTURA
  EVENTOS
  ESPORTE
  ACESSIBILIDADE
  OUTROS
}

enum EspecialidadeProfissional {
  CUIDADOR
  SECRETARIO_DO_LAR
  ENFERMEIRO
  MEDICO
  FISIOTERAPEUTA
  PSICOLOGO
  OUTROS
}

enum TipoEntidade {
  PROFISSIONAL
}
